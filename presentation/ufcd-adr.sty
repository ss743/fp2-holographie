%%
%% This is file `ufcd-adr.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% ufcd.dtx  (with options: `adr')
%% 
%% This is a generated file.
%% 
%% Lizenz
%% ======
%% 
%% Alle Rechte liegen bei der
%%   Universit"at Freiburg
%%   Stabsstelle Marketing und Wissensmanagement
%%   Fahnenbergplatz, D-79085 Freiburg
%%   Homepage: http://www.mw.uni-freiburg.de
%% Ansprechpartner ist deren Leiter
%%   Dr. Reiner Fuest
%%   Tel. 0761/203-5012
%%   E-Mail: reiner.fuest at mw.uni-freiburg.de
%% 
%% Die Dateien dieses Projektes stehen allen Mitgliedern der
%% Universit"at Freiburg zur Benutzung zur Verf"ugung.
%% 
%% Verteilt werden d"urfen diese Dateien nur an Mitglieder der
%% Universit"at Freiburg in TDS-Archiv-Form. Insbesondere hat
%% dies vollst"andig und unver"andert zu geschehen. Es d"urfen
%% aber weitere Dateien hinzugef"ugt werden (Logos,
%% Konfigurationsdateien, ...). Im TDS-Archiv liegen die Dateien
%% in Verzeichnissen vor, die dem TDS-Standard entsprechen
%% 
%%   TDS = TeX Directory Structure, siehe
%%   ftp://ftp.ctan.org/tex-archive/tds/tds.pdf
%% 
%% Ver"anderungen bed"urfen der Namens"anderung der Pakete oder
%% Klassen. Es gelten insbesondere die Bedingungen zur Verteilung
%% und Ver"anderung der LPPL 1.3 "`Conditions on Distribution
%% and Modification"', Punkte 1, 2 und 6. Aktueller Betreuer
%% schlie"sst den Rechteinhaber ein.
%% 
%%   LPPL = LaTeX Project Public License
%%   http://www.latex-project.org/lppl.txt
%% 
%% Es besteht keinerlei Gew"ahrleistung, soweit dies gesetzlich
%% zul"assig ist. Es gilt der Abschnitt "`No Warranty" aus
%% der LPPL.
%% 
%% Betreut wird das Projekt im Wintersemester 2009/10 vom Autor,
%%   Heiko Oberdiek
%%   E-Mail: heiko.oberdiek at googlemail.com
%% Danach liegt die Betreuung beim Rechteinhaber "Stabsstelle
%% Marketing und Wissensmanagement".
%% 
%% Das Projekt UFCD besteht aus folgenden Dateien:
%%   ufcd.sty, ufcd.pdf, ufcd.ins, ufcd.drv, ufcd.bib, ufcd-info.cls,
%%    ufcd-letter.cls, ufcd-memo.cls, ufcd-babel.sty,
%%    ufcd-base.sty, ufcd-color.sty, ufcd-foldmarks.sty,
%%    ufcd-font.sty, ufcd-kvopt.sty, ufcd-lang-load.sty,
%%    ufcd-lang-opt.sty, ufcd-lang-setup.sty, ufcd-logo.sty,
%%    ufcd-inputenx.sty, ufcd-inputenx-setup.sty, ufcd-adr.sty,
%%    ufcd-config.sty, ufcd-config-mw.cfg, ufcd-config-fuest.cfg,
%%    ufcd-config-iif.cfg, ufcd-config-imtek.cfg,
%%    ufcd-config-tf.cfg, ufcd-config-tf-dekanat.cfg,
%%    ufcd-config-tf-dekpamt.cfg,
%%    ufcd-config-tf-praktikumsamt.cfg,
%%    ufcd-config-tf-bibliothek.cfg, ufcd-config-template-e1.cfg,
%%    ufcd-config-template-e2.cfg, beamerthemeufcd.sty,
%%    beamercolorthemeufcd.sty, beamerfontthemeufcd.sty,
%%    beamerinnerthemeufcd.sty, beamerouterthemeufcd.sty,
%%    ufcd-example-letter1.tex, ufcd-example-letter2.tex,
%%    ufcd-example-letter3.tex, ufcd-example-letter4.tex,
%%    ufcd-example-memo.tex, ufcd-example-info.tex,
%%    ufcd-example-beamer.tex,
%%    ufcd-signature-mustermann.tex
%% 
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{ufcd-adr}%
  [2012/04/17 v1.0 Uni Freiburg Coporate Design (HO)]%
\RequirePackage{zref-base}[2007/04/22]
\RequirePackage{kvsetkeys}[2009/07/19]
\RequirePackage{ltxcmds}[2009/08/05]
\def\UFCDADR@DefHandle{%
  \zref@wrapper@babel{\edef\UFCDADR@Handle}%
}
\def\UFCDADR@DefKey#1{%
  \zref@wrapper@babel{\edef\UFCDADR@Key}{#1}%
  \lowercase\expandafter{%
    \expandafter\def\expandafter\UFCDADR@Key\expandafter{%
      \UFCDADR@Key
    }%
  }%
}
\newif\ifUFCDADR@New
\newcommand*{\ufcdAdrSetup}{%
  \@ifstar{%
    \UFCDADR@Newfalse
    \UFCDADR@AdrSetup
  }{%
    \UFCDADR@Newtrue
    \UFCDADR@AdrSetup
  }%
}
\def\UFCDADR@AdrSetup#1#2{%
  \UFCDADR@DefHandle{#1}%
  \ifUFCDADR@New
    \@ifundefined{UFCDadr@\UFCDADR@Handle}{%
    }{%
      \PackageError{ufcd-adr}{%
        Handle `\UFCDADR@Handle' is already defined!%
      }\@ehc
    }%
  \fi
  \@namedef{UFCDadr@\UFCDADR@Handle}{}%
  \kv@parse{#2}{%
    \ifx\kv@value\relax
      \PackageError{ufcd-adr}{%
        Missing value for key `\kv@key'\MessageBreak
        in setup for handle `\UFCDADR@Handle'%
      }\@ehc
    \else
      \UFCDADR@DefKey{\kv@key}%
      \expandafter\let
          \csname UFCDadr@\UFCDADR@Handle @\UFCDADR@Key\endcsname
          \kv@value
    \fi
    \ltx@gobbletwo
  }%
  \UFCDADR@Setup
  \UFCDADR@SetupHook
}
\newcommand*{\ufcdAfterAdrSetup}{%
  \g@addto@macro\UFCDADR@SetupHook
}
\def\UFCDADR@SetupHook{}
\newcommand*{\ufcdIfAdrHandle}[1]{%
  \UFCDADR@DefHandle{#1}%
  \begingroup\expandafter\expandafter\expandafter\endgroup
  \expandafter\ifx\csname UFCDadr@\UFCDADR@Handle\endcsname\relax
    \expandafter\ltx@secondoftwo
  \else
    \expandafter\ltx@firstoftwo
  \fi
}
\newcommand*{\ufcdIfAdrPropertyDefined}[2]{%
  \UFCDADR@DefHandle{#1}%
  \UFCDADR@DefKey{#2}%
  \UFCDADR@IfAdrPropertyDefined\UFCDADR@Key
}
\def\UFCDADR@IfAdrPropertyDefined#1{%
  \begingroup\expandafter\expandafter\expandafter\endgroup
  \expandafter\ifx\csname UFCDadr@\UFCDADR@Handle @#1\endcsname\relax
    \expandafter\ltx@secondoftwo
  \else
    \expandafter\ltx@firstoftwo
  \fi
}
\newcommand*{\ufcdIfAdrProperty}[2]{%
  \UFCDADR@DefHandle{#1}%
  \UFCDADR@DefKey{#2}%
  \UFCDADR@IfAdrProperty\UFCDADR@Key
}
\def\UFCDADR@IfAdrProperty#1{%
  \UFCDADR@IfAdrPropertyDefined{#1}{%
    \expandafter\ifx\csname UFCDadr@\UFCDADR@Handle @#1\endcsname
                    \ltx@empty
      \expandafter\ltx@secondoftwo
    \else
      \expandafter\ltx@firstoftwo
    \fi
  }{%
    \ltx@secondoftwo
  }%
}
\newcommand*{\ufcdAdrUse}[2]{%
  \UFCDADR@DefHandle{#1}%
  \UFCDADR@DefKey{#2}%
  \csname UFCDadr@\UFCDADR@Handle @\UFCDADR@Key\endcsname
}
\def\UFCDADR@AddToks#1{%
  \expandafter\expandafter\expandafter\UFCDADR@@AddToks
  \expandafter\expandafter\expandafter{%
    \csname UFCDadr@\UFCDADR@Handle @#1\endcsname
  }%
}
\def\UFCDADR@@AddToks#1{%
  \toks@\expandafter{\the\toks@#1}%
}
\def\UFCDADR@Setup{%
  \UFCDADR@SetupName
  \UFCDADR@SetupAddress
}
\def\UFCDADR@SetupName{%
  \UFCDADR@IfAdrPropertyDefined{name}{%
  }{%
    \begingroup
      \toks@{}%
      \UFCDADR@IfAdrProperty{firstname}{%
        \UFCDADR@IfAdrProperty{lastname}{%
          \UFCDADR@AddToks{firstname}%
          \UFCDADR@@AddToks{\ltx@space}%
          \UFCDADR@AddToks{lastname}%
        }{%
          \UFCDADR@AddToks{firstname}%
        }%
      }{%
        \UFCDADR@IfAdrProperty{lastname}{%
          \UFCDADR@AddToks{lastname}%
        }{}%
      }%
      \xdef\UFCDADR@gtemp{\the\toks@}%
    \endgroup
    \ifx\UFCDADR@gtemp\ltx@empty
    \else
      \expandafter\let\csname UFCDadr@\UFCDADR@Handle @name\endcsname
                      \UFCDADR@gtemp
      \PackageInfo{ufcd-adr}{%
        Key `name' added for handle `\UFCDADR@Handle'%
      }%
    \fi
  }%
}
\def\UFCDADR@SetupAddress{%
  \UFCDADR@IfAdrPropertyDefined{Address}{%
  }{%
    \begingroup
      \toks@{}%
      \UFCDADR@IfAdrProperty{zip}{%
        \UFCDADR@IfAdrProperty{city}{%
          \UFCDADR@IfAdrProperty{street}{%
            \UFCDADR@AddToks{street}%
            \UFCDADR@@AddToks{\\\relax}%
            \UFCDADR@AddToks{zip}%
            \UFCDADR@@AddToks{\ltx@space}%
            \UFCDADR@AddToks{city}%
          }{}%
        }{}%
      }{}%
      \xdef\UFCDADR@gtemp{\the\toks@}%
    \endgroup
    \ifx\UFCDADR@gtemp\ltx@empty
    \else
      \expandafter\let\csname UFCDadr@\UFCDADR@Handle @address\endcsname
                      \UFCDADR@gtemp
      \PackageInfo{ufcd-adr}{%
        Key `address' added for handle `\UFCDADR@Handle'%
      }%
    \fi
  }%
}
\newcommand*{\ufcdLoadAdrFile}[1]{%
  \let\UFCDADR@SavedAdrEntry\adrentry
  \let\UFCDADR@SavedAddrEntry\addrentry
  \let\UFCDADR@SavedAdrChar\adrchar
  \let\UFCDADR@SavedAddrChar\addrchar
  \let\adrentry\UFCDADR@AdrEntry
  \let\addrentry\UFCDADR@AddrEntry
  \let\UFCDADR@AdrChar\ltx@gobble
  \let\UFCDADR@AddrChar\ltx@gobble
  \edef\UFCDADR@RestoreAtCode{%
    \catcode64=\the\catcode64\relax
  }%
  \InputIfFileExists{#1.adr}{}{%
    \PackageError{ufcd-adr}{%
      Address file `#1.adr' not found%
    }\@ehc
  }%
  \UFCDADR@RestoreAtCode
  \let\adrentry\UFCDADR@SavedAdrEntry
  \let\addrentry\UFCDADR@SavedAddrEntry
  \let\adrchar\UFCDADR@SavedAdrChar
  \let\addrchar\UFCDADR@SavedAddrChar
}
\def\UFCDADR@AdrEntry#1#2#3#4#5#6#7#8{%
  \ufcdAdrSetup*{#8}{%
    lastname={#1},%
    firstname={#2},%
    address={#3},%
    phone={#4},%
    f1={#5},%
    f2={#6},%
    comment={#7}%
  }%
}
\def\UFCDADR@AddrEntry#1#2#3#4#5#6#7#8#9{%
  \ufcdAdrSetup*{#9}{%
    lastname={#1},%
    firstname={#2},%
    address={#3},%
    phone={#4},%
    f1={#5},%
    f2={#6},%
    f3={#7},%
    f4={#8}%
  }%
}
\expandafter\def\csname KV@UFCD@adrfile\endcsname#1{%
  \ufcdLoadAdrFile{#1}%
}
\expandafter\def\csname KV@UFCD@adr\endcsname#1{%
  \UFCDADR@DefHandle{#1}%
  \let\ufcdHandle\UFCDADR@Handle
}
\def\ufcdHandle{}
\endinput
%%
%% End of file `ufcd-adr.sty'.
